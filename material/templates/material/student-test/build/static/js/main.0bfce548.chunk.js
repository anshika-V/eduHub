(this["webpackJsonpcreate-test"]=this["webpackJsonpcreate-test"]||[]).push([[0],[,,function(e,t,n){e.exports={questionMain:"Question_questionMain__1_rxd",qno:"Question_qno__WrjZj",qtext:"Question_qtext__Z1Mmf",qinfo:"Question_qinfo__qsAMT",rightpannel:"Question_rightpannel__2UY0F",marksinp:"Question_marksinp__2Uhvn",choicesCont:"Question_choicesCont__wBpp9",choices:"Question_choices__lz6pm",choicesLabel:"Question_choicesLabel__1Ls73",ansInp:"Question_ansInp__egB3m",desc:"Question_desc__2_tAt"}},,,,,function(e,t,n){e.exports={navLink:"UserBtn_navLink__3C6qU",userBtn:"UserBtn_userBtn__2502Q",userBtnImg:"UserBtn_userBtnImg__1XDNf",userPannel:"UserBtn_userPannel__SYTvw",userPannelLink:"UserBtn_userPannelLink__squgZ",userData:"UserBtn_userData__ZFyrl",userBtnCont:"UserBtn_userBtnCont__1BfAU"}},,,function(e,t,n){e.exports={topBar:"Top_topBar__1M36g",navLink:"Top_navLink__31pSM",edu:"Top_edu__3lhuD",navCont:"Top_navCont__2D-Nz"}},function(e,t,n){e.exports={dot1:"SocketStatus_dot1__2gVtp",dot1Anim:"SocketStatus_dot1Anim__2GG5M",dot2:"SocketStatus_dot2__2ZiMM",dot2Anim:"SocketStatus_dot2Anim__2b30V",dot3:"SocketStatus_dot3__2aMyN",dot3Anim:"SocketStatus_dot3Anim__3SIAx",status:"SocketStatus_status__LHVNz"}},,function(e,t,n){e.exports={entry:"Initial_entry__-bfNu",desc:"Initial_desc__iz51X",details:"Initial_details__2dAez"}},,,function(e,t,n){e.exports={main:"Main_main__1oWsp",fullScreen:"Main_fullScreen__2WUCL",timer:"Main_timer__2qXw5"}},,function(e,t,n){e.exports={sidebarMain:"Sidebar_sidebarMain__3xpJL",sideHead:"Sidebar_sideHead__3_rEt",addBtn:"Sidebar_addBtn__17vBb"}},function(e,t,n){e.exports={qBtnsCont:"QuestionsBtns_qBtnsCont__r19tx",btns:"QuestionsBtns_btns__3JyHc"}},,,,,,function(e,t,n){e.exports={notifBtn:"Notification_notifBtn__U2Qxp"}},,function(e,t,n){e.exports=n(39)},,,,,function(e,t,n){},,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"takepicture",(function(){return de}));var a=n(0),s=n.n(a),r=n(9),i=n.n(r),o=(n(32),n(10)),c=n.n(o);var l=function(e){return s.a.createElement("div",{className:"ml-4 pl-4",id:c.a.navCont},s.a.createElement("a",{href:"/",className:[c.a.navLink,"ml-4 mr-4"].join(" ")},"Home"),s.a.createElement("a",{href:"#",className:[c.a.navLink,"ml-4 mr-4"].join(" "),style:{opacity:"30%"}},"Blog"),s.a.createElement("a",{href:"#",className:[c.a.navLink,"ml-4 mr-4"].join(" "),style:{opacity:"30%"}},"Contact"))},u=n(26),p=n(7),d=n.n(p),m=n(1);var f=Object(m.b)((function(e){return{profile:e.Profile}}))((function(e){var t=Object(a.useState)("none"),n=Object(u.a)(t,2),r=n[0],i=n[1];return s.a.createElement("div",{className:"ml-2",id:d.a.userBtnCont},s.a.createElement("button",{className:"p-0",id:d.a.userBtn,onClick:function(e){return i("block"===r?"none":"block")},onBlur:function(e){return setTimeout(i,10,"none")}},s.a.createElement("img",{src:void 0!==e.profile.name?window.media_url+e.profile.fields.profile_pic:"",id:d.a.userBtnImg,alt:""})),s.a.createElement("div",{onClick:function(e){return setTimeout(i,20,"block")},id:d.a.userPannel,className:"p-2 pr-3 bg-white",style:{display:r}},void 0!==e.profile.name?s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:d.a.userData},e.profile.username),s.a.createElement("span",{className:[d.a.userData,"text-secondary"].join(" ")},e.profile.email)):"",s.a.createElement("hr",{className:"m-0 mt-1"}),s.a.createElement("a",{href:"#",className:[d.a.navLink,d.a.userPannelLink,"pb-0 mt-2 mb-1 mr-2 ml-1"].join(" "),style:{opacity:"30%"}},"Profile"),s.a.createElement("a",{href:window.base+"/user/logout/",className:[d.a.navLink,d.a.userPannelLink,"pb-0 mb-0 mr-2 ml-1"].join(" ")},"Logout")))})),b=n(25),h=n.n(b);var v=function(e){return s.a.createElement("div",{className:"ml-auto mr-4",style:{opacity:"30%"}},s.a.createElement("button",{className:"material-icons  btn",id:h.a.notifBtn},"notifications"))},k=n(11),y=n.n(k);var E=Object(m.b)((function(e){return{socketStatus:e.SocketState.status}}))((function(e){var t="default";switch(e.socketStatus){case"connecting":case"saving":case"reconnecting":case"fetching":t=s.a.createElement("h6",{className:"text-muted mb-0 pb-0",id:y.a.status},e.socketStatus,s.a.createElement("span",{id:y.a.dot1},"."),s.a.createElement("span",{id:y.a.dot2},"."),s.a.createElement("span",{id:y.a.dot3},"."));break;case"saved":t=s.a.createElement("h6",{className:"text-muted",id:y.a.status},"All previous changes saved");break;case"connected":t=s.a.createElement("h6",{className:"text-muted",id:y.a.status},"Connected");break;default:t=s.a.createElement("h6",{className:"text-muted",id:y.a.status},e.socketStatus)}return s.a.createElement("div",{className:"ml-4 pb-0 mt-4"},t)}));var g=Object(m.b)(null,(function(e){return{updateProfile:function(t){return e(function(e){return{type:"updateProfile",payload:e}}(t))}}}))((function(e){return Object(a.useEffect)((function(){fetch(window.base+"/user/api/profile/",{credentials:window.cred}).then((function(e){return e.json()})).then((function(t){return e.updateProfile(t)}))}),[e]),s.a.createElement("div",{id:c.a.topBar,className:"d-flex flex-row align-items-center col-12 pl-2  text-light"},s.a.createElement("h1",{className:"display-3 ml-2 text-dark",id:c.a.edu,onClick:function(){return window.location.assign("/")}},s.a.createElement("span",null,"eduHub")),s.a.createElement(l,null),s.a.createElement(E,null),s.a.createElement(v,null),s.a.createElement(f,null))})),w=n(3),_=n(4),N=n(6),q=n(5),S=n(16),j=n.n(S),O=n(12),B=n(18),T=n.n(B),C=n(2),x=n.n(C),M=n(15),D=n(8),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"updateProfile":e=Object(D.a)({},t.payload)}return e},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{active:-1,questions:[],fields:{}},t=arguments.length>1?arguments[1]:void 0;switch(e=Object(D.a)({},e),t.type){case"updateTestData":e=Object(D.a)({},t.payload);break;case"updateActive":e.active=t.payload,-1!=e.active&&(e.questions[e.active].state[0]=1);break;case"updateActiveAnswer":e.questions[e.active].answer=t.payload,e.questions[e.active]=Object(D.a)({},e.questions[e.active]),["F","D"].includes(e.questions[e.active].fields.type)?""==e.questions[e.active].answer?e.questions[e.active].state[1]=0:e.questions[e.active].state[1]=1:["O","M","ON","MP","MN","MNP"].includes(e.questions[e.active].fields.type)&&("0000"==e.questions[e.active].answer.join("")?e.questions[e.active].state[1]=0:e.questions[e.active].state[1]=1),e.questions[e.active].changed=1;break;case"markForLater":e.questions[e.active].state[2]=(e.questions[e.active].state[2]+1)%2,e.questions[e.active].changed=1;break;case"submitted":e.questions=e.questions.map((function(e,n){return Object(D.a)(Object(D.a)({},e),{},{marks:t.payload[n]})}))}return e},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{socket:null,status:"connecting",questionBuffer:[],dataBuffer:[],isready:0,screen:null,snapsId:null},t=arguments.length>1?arguments[1]:void 0;switch(e=Object(D.a)({},e),t.type){case"setSocket":e.socket=t.payload,e.status="fetching";break;case"connected":e.status="connected",e.isready=1;break;case"disconnected":e.status="disconnected",e.isready=0;break;case"addToQuestionBuffer":e.questionBuffer=[].concat(Object(O.a)(e.questionBuffer),[t.payload]);break;case"sendingData":e.isready=0,e.status="saving";break;case"addToDataBuffer":e.dataBuffer=[].concat(Object(O.a)(e.dataBuffer),[t.payload]);break;case"savedQuestion":e.questionBuffer=Object(O.a)(e.questionBuffer.splice(1)),0===e.questionBuffer.length&&0===e.dataBuffer.length&&(e.status="saved"),e.isready=1;break;case"dataBufferShift":e.dataBuffer=Object(O.a)(e.dataBuffer.splice(1)),e.isready=1,0===e.questionBuffer.length&&0===e.dataBuffer.length&&(e.status="saved");break;case"SocketError":e.status="error";break;case"setScreenFunction":e.screen=t.payload;break;case"setSnapsId":e.snapsId=t.payload}return e},F=Object(M.c)(Object(M.b)({Profile:A,Test:I,SocketState:L}),{});function P(e){return{type:"addToDataBuffer",payload:e}}function Q(e){return function(){var e=F.getState().Test;if(-1===e.active||1!==e.questions[e.active].changed);else F.dispatch({type:"addToQuestionBuffer",payload:e.active})}(),{type:"updateActive",payload:e}}function U(e){return{type:"updateActiveAnswer",payload:e}}var H=function(e){Object(N.a)(n,e);var t=Object(q.a)(n);function n(){var e;Object(w.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).resetAnswer=function(t){e.props.updateAnswer([0,0,0,0])},e.answerHandler=function(t,n){var a=e.props.question.answer;"O"===e.props.question.fields.type[0]?(a=[0,0,0,0])[n-1]=1:a[n-1]=(a[n-1]+1)%2,e.props.updateAnswer(a)},e}return Object(_.a)(n,[{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:["p-0 d-flex w-100",x.a.choicesCont].join(" ")},s.a.createElement("div",{className:["p-0 d-flex w-100 align-items-baseline",x.a.choicesCont].join(" ")},s.a.createElement("div",{className:"form-check mt-4 ml-4 pl-4"},s.a.createElement("input",{className:"form-check-input",type:"radio",onClick:function(t){return e.answerHandler(t,1)},checked:1==this.props.question.answer[0]}),s.a.createElement("label",{className:["form-check-label",x.a.choicesLabel].join(" ")},void 0!==this.props.choices[0]?this.props.choices[0]:""))),s.a.createElement("div",{className:["p-0 d-flex w-100 align-items-baseline",x.a.choicesCont].join(" ")},s.a.createElement("div",{className:"form-check mt-4 ml-4 pl-4"},s.a.createElement("input",{className:"form-check-input",type:"radio",onClick:function(t){return e.answerHandler(t,2)},checked:1==this.props.question.answer[1]}),s.a.createElement("label",{className:["form-check-label",x.a.choicesLabel].join(" ")},void 0!==this.props.choices[1]?this.props.choices[1]:"")))),s.a.createElement("div",{className:["p-0 d-flex w-100",x.a.choicesCont].join(" ")},s.a.createElement("div",{className:["p-0 d-flex w-100 align-items-baseline",x.a.choicesCont].join(" ")},s.a.createElement("div",{className:"form-check mt-4 ml-4 pl-4"},s.a.createElement("input",{className:"form-check-input",type:"radio",onClick:function(t){return e.answerHandler(t,3)},checked:1==this.props.question.answer[2]}),s.a.createElement("label",{className:["form-check-label",x.a.choicesLabel].join(" ")},void 0!==this.props.choices[2]?this.props.choices[2]:""))),s.a.createElement("div",{className:["p-0 d-flex w-100 align-items-baseline",x.a.choicesCont].join(" ")},s.a.createElement("div",{className:"form-check mt-4 ml-4 pl-4"},s.a.createElement("input",{className:"form-check-input",type:"radio",onClick:function(t){return e.answerHandler(t,4)},checked:1==this.props.question.answer[3]}),s.a.createElement("label",{className:["form-check-label",x.a.choicesLabel].join(" ")},void 0!==this.props.choices[0]?this.props.choices[3]:"")))),s.a.createElement("button",{className:"btn btn-danger ml-4 mt-2 p-1",style:{fontSize:"x-small",display:this.props.submitted?"none":""},onClick:this.resetAnswer},"reset"))}}]),n}(a.Component),J=Object(m.b)((function(e){return{active:e.Test.active,choices:""!==e.Test.questions[e.Test.active].fields.jsonChoices?JSON.parse(e.Test.questions[e.Test.active].fields.jsonChoices):[],question:e.Test.questions[e.Test.active]}}),(function(e){return{updateAnswer:function(t){return e(U(t))}}}))(H);var R=Object(m.b)((function(e){return{active:e.Test.active,question:e.Test.questions[e.Test.active]}}))((function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement("img",{className:["m-2 ml-4 pl-4 w-50"].join(" "),alt:"not found",style:{display:""===e.question.fields.image?"none":"inline-block"},src:""===e.question.fields.image?"#":window.media_url+e.question.fields.image}))})),W=n(13),z=n.n(W),Z=function(e){Object(N.a)(n,e);var t=Object(q.a)(n);function n(e){var a;return Object(w.a)(this,n),(a=t.call(this,e)).state={marks:0,btnSpinner:"none"},a.enterBtn=null,a}return Object(_.a)(n,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{id:z.a.entry,className:"p-2 bg-light"},s.a.createElement("h1",{className:"text-center"},this.props.title),s.a.createElement("p",{className:"text-center",id:z.a.desc},this.props.description),s.a.createElement("button",{ref:function(t){return e.enterBtn=t},onClick:function(){e.setState({btnSpinner:""}),["connected","saving","saved"].includes(e.props.socketStatus)?(e.props.enter(1),e.props.addToDataBuffer(JSON.stringify({type:"enter"}))):setTimeout((function(){e.enterBtn.click()}),5e3)},className:"btn btn-success m-4 pl-4 pr-4 m-auto",style:{display:this.props.display}},"Enter",s.a.createElement("span",{className:"ml-2 spinner-border spinner-border-sm",style:{display:this.state.btnSpinner}})),s.a.createElement("div",{class:"custom-control custom-switch m-4"},s.a.createElement("input",{type:"checkbox",class:"custom-control-input",id:"customSwitch1",value:"fer",onChange:function(t){var n=null;t.target.checked?(n={type:"initilizeFER"},e.props.addToDataBuffer(JSON.stringify(n))):(n={type:"closeFER"},e.props.addToDataBuffer(JSON.stringify(n)))}}),s.a.createElement("label",{class:"custom-control-label",for:"customSwitch1"},"Expression Analyser")),s.a.createElement("div",{className:"mt-4",id:z.a.details},s.a.createElement("span",null,"Total Marks: ",this.state.marks),s.a.createElement("br",null),s.a.createElement("span",null,"Instructor: ",this.props.testData.instructor),s.a.createElement("br",null),-1==this.props.testData.duration?"":s.a.createElement("span",null,"Time:",this.props.testData.duration," minutes ")),s.a.createElement("div",{className:"ml-1 pt-4"},s.a.createElement("ul",{className:"float-left mt-4"},s.a.createElement("li",null,"D : Descriptive"),s.a.createElement("li",null,"F : Fill"),s.a.createElement("li",null," O : One Option Correct "),s.a.createElement("li",null,"ON : One Option Correct(Negative Marking) "),s.a.createElement("li",null,"M : Multu Option Correct"),s.a.createElement("li",null,"MP : Multu Option Correct(Partially correct)"),s.a.createElement("li",null," MN : Multu Option Correct(Negative Marking) "),s.a.createElement("li",null,"MPN : Multu Option Correct(Patrially correct and Neative marking)")),s.a.createElement("div",{className:"float-left ml-4 pl-4 mt-3"},s.a.createElement("button",{className:"btn btn-dark mr-4"}),s.a.createElement("label",{className:"mt-4"},"Unvisited"),s.a.createElement("br",null),s.a.createElement("button",{className:"btn btn-danger mr-4"}),s.a.createElement("label",null,"Unanswered"),s.a.createElement("br",null),s.a.createElement("button",{className:"btn btn-warning mr-4"}),s.a.createElement("label",null,"Marked For Later"),s.a.createElement("br",null),s.a.createElement("button",{className:"btn btn-info mr-4"}),s.a.createElement("label",null,"Answered and Marked"),s.a.createElement("br",null),s.a.createElement("button",{className:"btn btn-success mr-4"}),s.a.createElement("label",null,"Answered"),s.a.createElement("br",null),s.a.createElement("ul",null,s.a.createElement("li",{className:"text-danger mt-1"},s.a.createElement("p",{className:"mt-4"},"Do not refresh the page during the test"))))))}}]),n}(a.Component);Z.getDerivedStateFromProps=function(e,t){var n=0;return e.questions.forEach((function(e){n+=e.fields.marks})),{marks:n}};var V=Object(m.b)((function(e){return{title:e.Test.fields?e.Test.fields.title:"",description:e.Test.fields?e.Test.fields.description:"",questions:e.Test.questions,testData:e.Test.fields,socketStatus:e.SocketState.status,snapsId:e.SocketState.snapsId}}),(function(e){return{addToDataBuffer:function(t){return e(P(t))}}}))(Z),X=function(e){Object(N.a)(n,e);var t=Object(q.a)(n);function n(){var e;Object(w.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).check=function(){var t="";return e.props.submitted&&"D"!==e.props.question.fields.type&&(t=e.props.question.marks===e.props.question.fields.marks?s.a.createElement("h6",{className:"text-success ml-4 mt-4 pl-1"},"Correct"):0!==e.props.question.marks?s.a.createElement("h6",{className:"text-warning ml-4 mt-4 pl-1"},"Partially Correct"):s.a.createElement("h6",{className:"text-danger ml-4 mt-4 pl-1"},"Wrong")),t},e}return Object(_.a)(n,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{id:x.a.questionMain,className:"p-1 m-1 flex-grow-1 bg-light"},void 0===this.props.question||-1===this.props.active?s.a.createElement(V,{display:"none"}):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"d-flex flex-row align-items-top"},s.a.createElement("h2",{className:["d-inline mr-0 mr-2",x.a.qno].join(" ")},"Q.",this.props.active+1),s.a.createElement("h5",{className:["mt-3 mr-0 pr-0 ml-1",x.a.qinfo].join(" ")},this.props.question.fields.text),s.a.createElement("div",{className:[x.a.rightpannel,"ml-auto mr-3 mt-2"].join(" ")},s.a.createElement("h6",null,this.props.question.fields.marks),s.a.createElement("h6",null,this.props.question.fields.type))),s.a.createElement(R,null),s.a.createElement("br",null),"O"===this.props.question.fields.type||"M"===this.props.question.fields.type||"ON"===this.props.question.fields.type||"MP"===this.props.question.fields.type||"MN"===this.props.question.fields.type||"MPN"===this.props.question.fields.type?s.a.createElement(J,{type:this.props.question.fields.type,submitted:this.props.submitted}):"D"!==this.props.question.fields.type?s.a.createElement(s.a.Fragment,null,s.a.createElement("label",{className:"ml-4 pl-4 mt-4"},"Answer:"),s.a.createElement("input",{className:["ml-4 pl-4 form-control w-50",x.a.ansInp].join(" "),style:{display:"inline"},type:"text",name:"answer",value:this.props.question.answer,onChange:function(t){return e.props.updateAnswer(t.target.value)},readOnly:this.props.submitted})):s.a.createElement("div",{className:"d-flex align-items-strech flex-column pr-4 mr-4 ml-4"},s.a.createElement("label",{className:"mt-4"},"Answer:"),s.a.createElement("textarea",{className:["pl-4 form-control mb-4"].join(" "),style:{display:"inline"},type:"text",name:"answer",rows:"8",cols:"20",value:this.props.question.answer,onChange:function(t){return e.props.updateAnswer(t.target.value)},readOnly:this.props.submitted})),this.check(),s.a.createElement("br",null),s.a.createElement("button",{className:"float-right btn btn-info mt-2",style:{display:this.props.submitted?"none":"block"},onClick:this.props.mark},"Mark for later")))}}]),n}(a.Component),G=Object(m.b)((function(e){return{active:e.Test.active,question:e.Test.questions[e.Test.active],test:e.Test}}),(function(e){return{updateAnswer:function(t){return e(U(t))},mark:function(){return e({type:"markForLater",payload:null})}}}))(X),Y=n(19),K=n.n(Y),$=function(e){Object(N.a)(n,e);var t=Object(q.a)(n);function n(){return Object(w.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"render",value:function(){var e,t=this;return e=this.props.questions.map((function(e,n){var a="";switch(e.state.join("")){case"100":a="btn-danger";break;case"010":case"110":a="btn-success";break;case"001":case"101":a="btn-warning";break;case"011":case"111":a="btn-info";break;default:a="btn-dark"}return n===t.props.active&&(a="btn-primary"),s.a.createElement("button",{className:["btn m-2",K.a.btns,a].join(" "),key:n,onClick:function(){return t.props.updateActive(n)},active:n===t.props.active},n+1)})),s.a.createElement("div",{id:K.a.qBtnsCont},s.a.createElement("button",{className:["btn m-2 form-control w-25",K.a.btns,-1===this.props.active?"btn-primary":"btn-dark"].join(" "),onClick:function(){return t.props.updateActive(-1)},active:-1===this.props.active},"Test")," ",e)}}]),n}(a.Component),ee=Object(m.b)((function(e){return{active:e.Test.active,questions:e.Test.questions}}),(function(e){return{updateActive:function(t){return e(Q(t))}}}))($),te=function(e){Object(N.a)(n,e);var t=Object(q.a)(n);function n(e){var a;return Object(w.a)(this,n),(a=t.call(this,e)).state={started:e.startTime?new Date(e.startTime).getTime():(new Date).getTime(),left:60*e.duration*1e3,duration:60*e.duration*1e3},a}return Object(_.a)(n,[{key:"render",value:function(){var e=this,t=(new Date).getTime()-this.state.started,n=Math.floor(this.state.left/1e3),a=Math.floor(n/60);return n%=60,this.state.left>0?setTimeout((function(){return e.setState({left:e.state.duration-t})}),1e3):this.props.submit.click(),s.a.createElement("h5",{id:j.a.timer},"Time: ",a," : ",n)}}]),n}(a.Component),ne=Object(m.b)((function(e){return{startTime:e.Test.startTime}}))(te),ae=function(e){Object(N.a)(n,e);var t=Object(q.a)(n);function n(e){var a;return Object(w.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){-1==a.props.testData.duration||a.props.submitted||a.setState({timer:s.a.createElement(ne,{duration:a.props.testData.duration,submit:a.submit})})},a.sendResult=function(){if(a.setState({btnSpinner:""}),1===a.props.submitted)a.props.enter(2);else{console.log("snap id : ",a.props.snapsId),a.props.snapsId&&clearInterval(a.props.snapsId);var e=[];a.props.questions.forEach((function(t,n){var a=0;switch(t.fields.type){case"F":t.answer===t.fields.answer&&(a=t.fields.marks);break;case"M":case"O":case"ON":case"MN":t.answer.join("")===t.fields.answer?a=t.fields.marks:"MN"!==t.fields.type&&"ON"!==t.fields.type||(a=-1);break;case"MP":case"MNP":var s=t.fields.answer.split(""),r=t.answer.join(""),i=[0,0,0];s.forEach((function(e,t){"1"===e?(i[1]+=1,"1"===r[t]&&(i[0]+=1)):e!==r[t]&&(i[2]=1)})),(a=1===i[2]?"MNP"===t.fields.type?-1:0:i[0]/Math.max(1,i[1])*t.fields.marks).toFixed(2)}e=[].concat(Object(O.a)(e),[a])}));var t={type:"submit",marks:e};a.props.addToDataBuffer(JSON.stringify(t))}},a.state={timer:"",btnSpinner:"none"},a.submit=null,a}return Object(_.a)(n,[{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{id:T.a.sidebarMain,className:"p-1 bg-secondary"},s.a.createElement("h1",{className:"display-4 bg-info text-light pl-2",id:T.a.sideHead},"Questions",s.a.createElement("button",{id:T.a.addBtn,className:"btn btn-dark",ref:function(t){return e.submit=t},onClick:function(){e.sendResult()}},this.props.submitted?"Result":"Submit",s.a.createElement("span",{className:"ml-1 spinner-border spinner-border-sm",style:{display:this.state.btnSpinner}}))),s.a.createElement(ee,null),this.state.timer),s.a.createElement(G,{submitted:this.props.submitted}))}}]),n}(a.Component),se=Object(m.b)((function(e){return{pk:e.Test.pk,testData:e.Test.fields,questions:e.Test.questions,snapsId:e.SocketState.snapsId}}),(function(e){return{addToDataBuffer:function(t){return e(P(t))}}}))(ae);var re=Object(m.b)((function(e){return{questions:e.Test.questions,test:e.Test}}))((function(e){var t=0,n=0;return e.questions.forEach((function(e,a){t+=e.fields.marks,n+=e.marks})),s.a.createElement("div",{id:z.a.entry,className:"p-4 bg-light m-4 text-center"},s.a.createElement("h1",{className:"display-3"},"Results"),s.a.createElement("h1",{className:"display-2"},n,"/",t),s.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.enter(3)}},"check answers"))}));var ie=function(e){return s.a.createElement(s.a.Fragment,null,e.message)},oe=function(e){Object(N.a)(n,e);var t=Object(q.a)(n);function n(e){var a;return Object(w.a)(this,n),(a=t.call(this,e)).NewWebSocket=function(){var e="wss://";"http:"==window.location.protocol&&(e="ws://");var t=le();a.ws=new WebSocket(e+window.hostName+"/ws/material/student-test/"+t+"/"),a.ws.onopen=function(){a.props.setSocket(a.ws)},a.ws.onmessage=function(e){a.error=0;var t=JSON.parse(e.data);switch(t.type){case"connected":a.props.updateTestData(t.TestData),a.props.socketConnected();break;case"reconnected":a.props.updateTestDataForReconnected(t.TestData),a.props.socketConnected();break;case"data_received":a.props.dataBufferShift();break;case"question_received":a.props.savedQuestion();break;case"submitted":a.props.submitted(JSON.parse(a.props.dataBuffer[0]).marks),a.props.screen(2),a.props.dataBufferShift();break;case"fer_ready":a.props.dataBufferShift();var n=setInterval(a.snap,3e3);a.props.setSnapsId(n)}},a.ws.onclose=function(e){0===a.error&&(a.props.disconnected(),setTimeout(a.NewWebSocket,5e3))},a.ws.onerror=function(e){a.error+=1,a.error<5?(a.props.disconnected(),setTimeout(a.NewWebSocket,5e3)):(a.props.socketError(),a.error=1,navigator.onLine||(window.ononline=function(){a.props.disconnected(),a.NewWebSocket()}))}},a.componentDidMount=function(){a.NewWebSocket()},a.BufferManager=function(){var e=F.getState().Test.questions;if(0!==a.props.isready)if(0!==a.props.questionBuffer.length){var t=e[a.props.questionBuffer[0]],n=[t.answer,t.state],s=n[0],r=n[1],i={type:"questionUpdate",index:a.props.questionBuffer[0],payload:{answer:s,state:r}};i=JSON.stringify(i),a.props.sendingData(),a.ws.send(i)}else if(0!==a.props.dataBuffer.length){var o=a.props.dataBuffer[0];a.props.sendingData(),a.ws.send(o)}},a.snap=function(){var e=de(),t=new FileReader;t.onload=function(e){var t=e.target.result,n=new Uint8Array(t),s=Array.from(n),r={type:"ferimage",payload:{name:(new Date).toLocaleTimeString().replace(/:/g,"-")+".png",image:s,question_number:a.props.active+1}};a.props.addToDataBuffer(JSON.stringify(r))},e.toBlob((function(e){t.readAsArrayBuffer(e)}))},a.ws=null,a.error=0,a}return Object(_.a)(n,[{key:"render",value:function(){return this.BufferManager(),i.a.unmountComponentAtNode(document.getElementById("message")),i.a.render(s.a.createElement(ie,{message:this.props.socket.status}),document.getElementById("message")),s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{onClick:this.snap},"snap"))}}]),n}(a.Component),ce=Object(m.b)((function(e){return{active:e.Test.active,socket:e.SocketState,dataBuffer:e.SocketState.dataBuffer,questionBuffer:e.SocketState.questionBuffer,isready:e.SocketState.isready,screen:e.SocketState.screen}}),(function(e){return{setSocket:function(t){return e(function(e){return{type:"setSocket",payload:e}}(t))},socketConnected:function(){return e({type:"connected",payload:null})},updateTestData:function(t){return e(function(e){var t=e.questions.map((function(e){return e.answer="",e.state=[0,0,0],e.changed=0,["O","M","ON","MP","MN","MNP"].includes(e.fields.type)&&(e.answer=[0,0,0,0]),e}));return e.questions=Object.assign([],t),e.active=-1,{type:"updateTestData",payload:e}}(t))},disconnected:function(){return e({type:"disconnected",payload:null})},updateTestDataForReconnected:function(t){return e(function(e){var t=e.questions.map((function(e){return e.changed=0,e}));return e.questions=Object.assign([],t),e.active=-1,{type:"updateTestData",payload:e}}(t))},sendingData:function(){return e({type:"sendingData",payload:null})},savedQuestion:function(){return e({type:"savedQuestion",payload:null})},dataBufferShift:function(){return e({type:"dataBufferShift",payload:null})},socketError:function(){return e({type:"SocketError",payload:null})},submitted:function(t){return e(function(e){return{type:"submitted",payload:e}}(t))},addToDataBuffer:function(t){return e(P(t))},setSnapsId:function(t){return e(function(e){return{type:"setSnapsId",payload:e}}(t))}}}))(oe),le=function(){var e=window.location.href,t=e.length,n=e.lastIndexOf("/");return n===t-1&&(n=(e=e.slice(0,-1)).lastIndexOf("/")),e.substring(n+1)},ue=function(e){Object(N.a)(n,e);var t=Object(q.a)(n);function n(e){var a;return Object(w.a)(this,n),(a=t.call(this,e)).enter=function(e){a.setState({enter:e})},a.screen=function(){var e;switch(a.state.enter){case 0:e=s.a.createElement(V,{enter:a.enter,display:"block"});break;case 1:e=s.a.createElement(se,{enter:a.enter,submitted:0});break;case 2:e=s.a.createElement(re,{enter:a.enter});break;case 3:e=s.a.createElement(se,{enter:a.enter,submitted:1})}return e},a.state={enter:0},a.props.setScreenFunction(a.enter),a}return Object(_.a)(n,[{key:"render",value:function(){return s.a.createElement("div",{id:j.a.main,className:1==this.state.enter?["p-1 d-flex pt-2",j.a.fullScreen].join(" "):"p-1 d-flex pt-2"},this.screen())}}]),n}(a.Component),pe=Object(m.b)(null,(function(e){return{setScreenFunction:function(t){return e(function(e){return{type:"setScreenFunction",payload:e}}(t))}}}))(ue);var de,me=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(g,null)," ",s.a.createElement(pe,null))};window.base="",window.hostName=window.location.host,window.media_url="https://eduhub.blob.core.windows.net/eduhub/",window.cred="same-origin",i.a.render(s.a.createElement(m.a,{store:F},s.a.createElement(me,null),s.a.createElement(ce,null)),document.getElementById("root")),function(){var e=0,t=!1,n=null,a=null,s=null,r=null;function i(){var e=a.getContext("2d");e.fillStyle="#AAA",e.fillRect(0,0,a.width,a.height);var t=a.toDataURL("image/png");s.setAttribute("src",t)}de=function(){var t=a.getContext("2d");if(e){a.width=320,a.height=e,t.drawImage(n,0,0,320,e);var r=a.toDataURL("image/png");s.setAttribute("src",r)}else i();return a},window.addEventListener("load",(function(){n=document.getElementById("video"),a=document.getElementById("canvas"),s=document.getElementById("photo"),r=document.getElementById("snapbutton"),navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((function(e){n.srcObject=e,n.play()})).catch((function(e){console.log("An error occurred: "+e)})),n.addEventListener("canplay",(function(s){t||(e=n.videoHeight/(n.videoWidth/320),isNaN(e)&&(e=240),n.setAttribute("width",320),n.setAttribute("height",e),a.setAttribute("width",320),a.setAttribute("height",e),t=!0)}),!1),r.addEventListener("click",(function(e){de(),e.preventDefault()}),!1),i()}),!1)}()}],[[27,1,2]]]);
//# sourceMappingURL=main.0bfce548.chunk.js.map